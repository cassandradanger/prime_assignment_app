<% content_for :page_title, 'Dashboard' %>

<div class="row">
  <div class="col-md-3 col-sm-6">
    <div class="ibox">
      <div class="ibox-title"><h5>Users</h5></div>
      <div class="ibox-content">
        <h1 class="no-margins"><%= @user_count %></h1>
        <small>Total Users</small>
      </div>
    </div>
  </div>


  <div class="col-md-3 col-sm-6">
    <div class="ibox">
      <div class="ibox-title"><h5>Started</h5></div>
      <div class="ibox-content">
        <h1 class="no-margins"><%= @apps_count %></h1>
        <small>Started Applications</small>
      </div>
    </div>
  </div>


  <div class="col-md-3 col-sm-6">
    <div class="ibox">
      <div class="ibox-title"><h5>Complete</h5></div>
      <div class="ibox-content">
        <h1 class="no-margins"><%= @apps_completed_count %></h1>
        <small>Completed Applications</small>
      </div>
    </div>
  </div>

  <div class="col-md-3 col-sm-6">
    <div class="ibox">
      <div class="ibox-title"><h5>Accepted</h5></div>
      <div class="ibox-content">
        <h1 class="no-margins"><%= @apps_accepted_count %></h1>
        <small>Accepted Applications</small>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox">
      <div class="ibox-title">
        <h5>New Users, Started and Complete Applications</h5>

        <div class="pull-right">
          <%= bootstrap_form_tag url: dashboard_path, method: 'get' do |f| %>
              <div class="btn-group">
                <%= f.button 'Week', name: 'apps_time_filter', value: 'week', class: (@app_line_time_filter == 'week') ? 'btn btn-xs btn-white time-filter active' : 'btn btn-xs btn-white time-filter' %>
                <%= f.button 'Month', name: 'apps_time_filter', value: 'month', class: (@app_line_time_filter == 'month') ? 'btn btn-xs btn-white time-filter active' : 'btn btn-xs btn-white time-filter' %>
                <%= f.button 'Quarter', name: 'apps_time_filter', value: 'quarter', class: (@app_line_time_filter == 'quarter') ? 'btn btn-xs btn-white time-filter active' : 'btn btn-xs btn-white time-filter' %>
              </div>
          <% end %>
        </div>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div class="col-md-12 ">
            <%= line_chart dashboard_chart_data_path(type: 'created_and_completed',time_filter: @app_line_time_filter), library: {theme: 'maximized', legend: {position: 'in', alignment: 'end'}} %>
          </div>
          <!--div class="col-lg-3">
            <ul class="stat-list">
                <li>
                  <h3 class="no-marginss"><%= @apps_count %></h3>
                  <small>Started Applications</small>
                  <div class="stat-percent">100% <i class="fa fa-level-up text-navy"></i></div>
                  <div class="progress progress-mini">
                    <div style="width: 100%;" class="progress-bar progress-bar-success"></div>
                  </div>
                </li>
                <li>
                  <h3 class="no-marginss "><%= @apps_completed_count %></h3>
                  <small>Complete Applications</small>
                  <div class="stat-percent">60% <i class="fa fa-level-down text-navy"></i></div>
                  <div class="progress progress-mini">
                    <div style="width: 60%;" class="progress-bar progress-bar-warning"></div>
                  </div>
                </li>
                <li>
                  <h3 class="no-marginss"><%= @apps_completed_count %></h3>
                  <small>Accepted Applications</small>
                  <div class="stat-percent">20% <i class="fa fa-level-down text-navy"></i></div>
                  <div class="progress progress-mini">
                    <div style="width: 20%;" class="progress-bar progress-bar-danger"></div>
                  </div>
                </li>
                <li>
                  <h3 class="no-marginss "><%= @apps_completed_count %></h3>
                  <small>Confirmed Applications</small>
                  <div class="stat-percent">0% <i class="fa fa-level-down text-navy"></i></div>
                  <div class="progress progress-mini">
                    <div style="width: 0%;" class="progress-bar progress-bar-danger"></div>
                  </div>
                </li>
              </ul>
          </div-->
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-4">
    <div class="ibox">
      <div class="ibox-title">
        <h5>Referral Source</h5>
      </div>
      <div class="ibox-content ">
        <%= pie_chart dashboard_chart_data_path(type: 'referral_source'), library: {theme: 'maximized'} %>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="ibox">
      <div class="ibox-title">
        <h5>Payment Option</h5>
      </div>
      <div class="ibox-content ">
        <%= pie_chart dashboard_chart_data_path(type: 'payment_option'), library: {theme: 'maximized'} %>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="ibox">
      <div class="ibox-title">
        <h5>Education</h5>
      </div>
      <div class="ibox-content ">
        <%= pie_chart dashboard_chart_data_path(type: 'education'), library: {theme: 'maximized'} %>
      </div>
    </div>
  </div>
</div>
